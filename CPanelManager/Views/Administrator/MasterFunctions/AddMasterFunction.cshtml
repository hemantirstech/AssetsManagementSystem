@model CPanelManager.ViewModels.MasterFunction.AddMasterFunctionViewModel

@{
    ViewData["Title"] = "AddMasterFunction";
}

<!-- MAIN CONTENT -->
<div id="content">


    <form asp-action="SaveMasterFunction" id="MasterFunction-form" novalidate="novalidate" method="post" enctype="multipart/form-data">
        <div class="row">
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
                <h1 class="page-title txt-color-blueDark">
                    <i class="fa fa-edit fa-fw "></i>
                    MasterFunction
                    <span>
                        >
                        Add / View
                    </span>
                </h1>
            </div>
            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8" style="text-align:right;padding-top:10px;">
                <input type="hidden" asp-for="MasterFunctionId" />
                <input type="hidden" asp-for="Mode" />

                <a asp-action="Index" class="btn btn-lg btn-labeled btn-danger">
                    <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>Cancel
                </a>

                <button id="btnsave" type="submit" class="btn btn-lg btn-labeled btn-primary">
                    <span class="btn-label"><i class="glyphicon glyphicon-floppy-disk"></i></span>Save / Update
                </button>
            </div>
        </div>

        

        <div class="alert alert-block alert-success">
            <a class="close" data-dismiss="alert" href="#">×</a>
            <h4 class="alert-heading"><i class="fa fa-check-square-o"></i> Check validation!</h4>
            <p>
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            </p>
        </div>


        <!-- widget grid -->
        <section id="widget-grid" class="">

            <!-- START ROW -->
            <div class="row">

                <!-- NEW COL START -->
                <article class="col-sm-12 col-md-12 col-lg-7">

                    <!-- Widget ID (each widget will need unique ID)-->
                    <div class="jarviswidget" id="wid-id-1" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-collapsed="false" data-widget-togglebutton="false" data-widget-sortable="false">


                        <!-- widget div-->
                        <div>

                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>
                            <!-- end widget edit box -->
                            <!-- widget content -->
                            <div class="widget-body no-padding">

                                <div class="smart-form" novalidate="novalidate">
                                    <header>
                                        Master Function
                                    </header>

                                    <fieldset>

                                        <section>
                                            <label class="label">Parent </label>
                                            <label class="select">

                                                @Html.DropDownList("ParentMasterFunctionId", (SelectList)ViewBag.ParentFunctionList, new { @class = "input-sm", id = "ParentMasterFunctionId" })
                                                <i></i>
                                                <span asp-validation-for="ParentMasterFunctionId" class="text-danger"></span>
                                            </label>
                                            <div class="note">
                                                <strong>Note:</strong> Select Parent Menu if menu is parent.
                                            </div>
                                        </section>

                                        <div class="row">
                                            <section class="col col-8">
                                                <label class="label">Title</label>
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-tag"></i>
                                                    <input asp-for="FunctionTitle" placeholder="Title" maxlength="100" />
                                                    <span asp-validation-for="FunctionTitle" class="text-danger"></span>
                                                </label>
                                            </section>

                                            <section class="col col-4">
                                                <label class="label">Icon</label>
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-tag"></i>
                                                    <input asp-for="FunctionIcon" placeholder="Icon" maxlength="100" />
                                                    <span asp-validation-for="FunctionIcon" class="text-danger"></span>
                                                </label>
                                            </section>
                                        </div>

                                        <div class="row">
                                            <section class="col col-8">
                                                <label class="label">URL</label>
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-tag"></i>
                                                    <input asp-for="FunctionLink" placeholder="URL" maxlength="100" />
                                                    <span asp-validation-for="FunctionLink" class="text-danger"></span>
                                                </label>
                                                <div class="note">
                                                    <strong>URl Format:</strong> /ControlerName/ActionResult.
                                                </div>
                                            </section>

                                            <section class="col col-4">
                                                <label class="label">Colour</label>
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-tag"></i>
                                                    <input asp-for="ActiveColor" placeholder="Colour" maxlength="100" />
                                                    <span asp-validation-for="ActiveColor" class="text-danger"></span>
                                                </label>
                                            </section>
                                        </div>


                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="label">Sequence</label>
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-tag"></i>
                                                    <input asp-for="Sequence" placeholder="Sequence" maxlength="5" onkeypress="javascript: return isIntegerNumberKey(event)" />
                                                    <span asp-validation-for="Sequence" class="text-danger"></span>
                                                </label>
                                            </section>

                                            <section class="col col-6">
                                                <label class="label">Active</label>
                                                <label class="toggle">
                                                    <input type="checkbox" id="IsActive" name="IsActive" value="true" checked="checked">
                                                    <i data-swchon-text="True" data-swchoff-text="False"></i>
                                                </label>
                                                <span asp-validation-for="IsActive" class="text-danger"></span>
                                            </section>
                                        </div>


                                    </fieldset>


                                </div>

                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>
                    <!-- end widget -->

                </article>
                <!-- END COL -->
                <!-- NEW COL START -->
                <article class="col-sm-12 col-md-12 col-lg-5">

                    <!-- Widget ID (each widget will need unique ID)-->
                    <div class="jarviswidget" id="wid-id-2" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-collapsed="false" data-widget-togglebutton="false" data-widget-sortable="false">

                        <!-- widget div-->
                        <div>

                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>
                            <!-- end widget edit box -->
                            <!-- widget content -->
                            <div class="row">
                                <div class="col-sm-12">

                                    <div class="well">
                                        <button class="close" data-dismiss="alert">
                                            ×
                                        </button>
                                        <h1 class="semi-bold">MasterFunction</h1>
                                        <p>
                                            Master Function is to add the the new child menu inside the existing parent menu. By selecting the Parent menu  and entering the details about the child menu and then by clicking on Save/Update button we can create the child menu/Sub menu
                                        </p>

                                       
                                    </div>

                                </div>
                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>
                    <!-- end widget -->

                </article>
                <!-- END COL -->
            </div>
            <!-- END ROW -->


        </section>
        <!-- end widget grid -->
    </form>
</div>


@section Scripts {

    <script type="text/javascript">
        var IsActive = "@Model.IsActive";
       
        if (IsActive == "True") {
            $('#IsActive').prop('checked', true);
        }
        else {
            $('#IsActive').prop('checked', false);
        }

        $('#MasterFunctionTitle').change(function () {
            var url = "/MasterFunction/MasterFunctionExists";
            var _MasterFunctionTitle = $('#MasterFunctionTitle').val();
            
            if (_MasterFunctionTitle != '') {
               
                $.getJSON(url, { MasterFunctionTitle:_MasterFunctionTitle}, function (data) {
                    alert(data);
                    if (data == true) {
                        $("#MasterFunctionTitle").css('background-color', '');
                    }
                    else {
                        $("#MasterFunctionTitle").css('background-color', '#FFBFBF');
                        alert('GenCode Type Title Already Exist!');
                    }
                });
            }
        });

        //$('#MasterFunctionPrintDesc').change(function () {
        //    var url = "/MasterFunction/MasterFunctionPrintCodeExists";
        //    var data = $('#MasterFunctionPrintDesc').val();

        //    if (data != '') {
        //        $.get(url, { TableName: 'CGMasterFunction', NameAvailable: data, NameId: Cid }, function (data) {
        //            if (data == "Available") {
        //                $("#MasterFunctionPrintDesc").css('background-color', '');
        //            }
        //            else {
        //                $("#MasterFunctionPrintDesc").css('background-color', '#FFBFBF');
        //                alert('Print Description Already Exist!');
        //            }
        //        });
        //    }

        //})
    </script>

    <script src="~/js/Views/MasterFunction/AddMasterFunction.js"></script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
